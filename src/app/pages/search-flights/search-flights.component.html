<div class="search-header">
  <div class="container">
    <h1>Search Your Flight</h1>
  </div>
</div>

<!-- Added margin-bottom directly to this wrapper to ensure gap even without results -->
<div class="container search-wrapper" style="margin-bottom: 100px;">
  
  <div class="search-panel">
    <div class="search-form">
      <div class="field autocomplete-container">
        <label>Origin</label>
        <input type="text" [(ngModel)]="searchData.fromName" (input)="onCitySearch($event, 'from')" placeholder="Type City (e.g. Delhi)">
        <ul class="suggestion-list" *ngIf="fromSuggestions.length > 0">
          <div class="error" *ngIf="errors.from">
            {{ errors.from }}
          </div>
          <li *ngFor="let city of fromSuggestions" (click)="selectCity(city, 'from')">
            <strong>{{city.name}}</strong> <span>{{city.iataCode}}</span>
            <small>{{city.address.countryName}}</small>
          </li>
        </ul>
      </div>

      <div class="field autocomplete-container">
        <label>Destination</label>
        <input type="text" [(ngModel)]="searchData.toName" (input)="onCitySearch($event, 'to')" placeholder="Type City (e.g. Mumbai)">
        <div class="error" *ngIf="errors.to">
          {{ errors.to }}
        </div>
        <ul class="suggestion-list" *ngIf="toSuggestions.length > 0">
          <li *ngFor="let city of toSuggestions" (click)="selectCity(city, 'to')">
            <strong>{{city.name}}</strong> <span>{{city.iataCode}}</span>
            <small>{{city.address.countryName}}</small>
          </li>
        </ul>
      </div>

      <div class="field">
        <label>Date</label>
        <input type="date" [(ngModel)]="searchData.date">
        <div class="error" *ngIf="errors.date">
        {{ errors.date }}
      </div>
      </div>
      <div class="field action">
        <button class="btn-search" (click)="onSearch()" [disabled]="loading">{{ loading ? 'Searching...' : 'FIND FLIGHTS' }}</button>
      </div>
    </div>
  </div>
  <div class="text-center">
    <small class="error" *ngIf="errors.general">
      {{ errors.general }}
    </small>
  </div>

  <!-- Flight Results Section -->
  <div class="results-container" *ngIf="flights.length > 0">
    <div class="flight-card" *ngFor="let f of flights">
      <div class="f-logo">
        <img src="https://img.freepik.com/free-vector/bird-colorful-logo-gradient-designs_343694-2506.jpg" alt="Logo">
      </div>

      <div class="f-time">
        <p class="date-label">{{ f.itineraries[0].segments[0].departure.at | date:'EEE, dd MMM' }}</p>
        <p class="time-main">{{ f.itineraries[0].segments[0].departure.at | date:'shortTime' }}</p>
        <p class="city-code">{{ searchData.from }}</p>
      </div>

      <div class="f-duration">
        <span>Non-stop</span>
        <div class="line"></div>
      </div>

      <div class="f-time">
        <p class="date-label">{{ f.itineraries[0].segments[0].arrival.at | date:'EEE, dd MMM' }}</p>
        <p class="time-main">{{ f.itineraries[0].segments[0].arrival.at | date:'shortTime' }}</p>
        <p class="city-code">{{ searchData.to }}</p>
      </div>

      <div class="f-price">
        <p class="price">â‚¹ {{ (f.price.total*105.70).toFixed(0) }}</p>
        <button class="btn-primary" (click)="bookFlight(f)">Book Now</button>
      </div>
    </div>
  </div>
</div>