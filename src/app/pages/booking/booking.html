<div class="page">
  <h1 class="main-title">Air India Booking Portal</h1>

  <!-- ---------------- BOOK FLIGHT ---------------- -->
  <section class="card">
    <div class="card-header">
      <h2 class="section-title">Book a New Flight</h2>
    </div>

    <form [formGroup]="bookForm" (ngSubmit)="bookFlight()">
      <div class="row">
        <div class="input-wrap">
          <label>Flight ID</label>
          <input formControlName="flightId" placeholder="e.g. AI-101">
        </div>
        <div class="input-wrap">
          <label>Passenger Name</label>
          <input formControlName="name" placeholder="Full Name">
        </div>
      </div>

      <div class="row">
        <div class="input-wrap">
          <label>Email Address</label>
          <input formControlName="email" type="email" placeholder="email@example.com">
        </div>
        <div class="input-wrap">
          <label>Number of Seats</label>
          <input formControlName="seats" type="number" placeholder="1">
        </div>
      </div>

      <div class="row">
        <div class="input-wrap">
          <label>Gender</label>
          <select formControlName="gender">
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </div>

      <button type="submit" class="btn-book">Confirm Booking</button>
    </form>
  </section>

  <!-- ---------------- SEARCH TICKET ---------------- -->
  <section class="card">
    <h2 class="section-title">Manage Booking (PNR Search)</h2>
    <div class="search-row">
      <input [(ngModel)]="pnr" placeholder="Enter 6-digit PNR">
      <button (click)="searchTicket()" class="btn-search">Search</button>
    </div>

    <div *ngIf="ticket" class="result-box">
      <h3>Ticket Details</h3>
      <div class="ticket-grid">
        <p><b>PNR:</b> {{ticket.pnr}}</p>
        <p><b>Name:</b> {{ticket.passengerName}}</p>
        <p><b>Flight:</b> {{ticket.flightId}}</p>
        <p><b>Status:</b> <span class="status-badge">{{ticket.status}}</span></p>
      </div>
      <button class="btn-danger" (click)="cancelTicket(ticket.pnr)">Cancel Ticket</button>
    </div>
  </section>

  <!-- ---------------- BOOKING HISTORY ---------------- -->
  <section class="card">
    <h2 class="section-title">Your Travel History</h2>
    <div class="search-row">
      <input [(ngModel)]="email" placeholder="Enter Registered Email">
      <button (click)="loadHistory()" class="btn-search">View History</button>
    </div>

    <div class="table-container" *ngIf="history.length > 0">
      <table>
        <thead>
          <tr>
            <th>PNR</th>
            <th>Passenger</th>
            <th>Flight</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of history">
            <td>{{t.pnr}}</td>
            <td>{{t.passengerName}}</td>
            <td>{{t.flightId}}</td>
            <td><span class="status-badge small">{{t.status}}</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</div>